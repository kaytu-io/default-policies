connectors:
- AWS
- Azure
query: "select c.name as cloud_account_name, c.id as _discovered_provider_id, t.* from (\n(select \n  'AWS' as provider, \n  r.name as name, \n  r.region as location, \n  jsonb_path_query(r.description, '$.Cluster.Tags') as _tags,\n  r.connection_id as _kaytu_connection_id,\n  r.resource_id as _resource_id,\n  r.resource_type as _resource_type,\n  jsonb_path_query(r.description, '$.Cluster.PlatformVersion') as kubernetes_version,\n  r.created_at as _last_discovered\nfrom \n  kaytu_resources r\nwhere \n  resource_type = 'aws::eks::cluster') \n\nunion \n\n(select \n  'Azure' as provider, \n  r.name as vm_name, \n  r.region as location, \n  jsonb_path_query(r.description, '$.ManagedCluster.Tags') as _tags,\n  r.connection_id as _kaytu_connection_id,\n  r.resource_id as _resource_id,\n  r.resource_type as _resource_type,\n  jsonb_path_query(r.description, '$.ManagedCluster.Properties.KubernetesVersion') as kubernetes_version,\n  r.created_at as _last_discovered\nfrom \n  kaytu_resources r \nwhere \n  resource_type = 'microsoft.containerservice/managedclusters')\n\n) as t inner join kaytu_connections c on t._kaytu_connection_id = c.kaytu_id "
title: Kubernetes Clusters
